<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Fractal Language Learning System - Interactive Guide</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            margin: 0; 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif; 
        }
        .lucide {
            width: 1em;
            height: 1em;
            display: inline-block;
            vertical-align: middle;
        }
        .cube-face-highlight {
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.8);
            border-color: #3b82f6 !important;
            border-width: 4px !important;
        }
        .pulse-animation {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .5;
            }
        }
        .interactive-hint {
            position: relative;
        }
        .interactive-hint::after {
            content: 'üëÜ Click me!';
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: #3b82f6;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }
        .interactive-hint:hover::after {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Simple icon components
        const ChevronDown = () => <span className="lucide">‚ñº</span>;
        const RotateCcw = () => <span className="lucide">‚Üª</span>;
        const Share2 = () => <span className="lucide">‚Üó</span>;
        const Eye = () => <span className="lucide">üëÅ</span>;
        const Mouse = () => <span className="lucide">üñ±Ô∏è</span>;
        const Hand = () => <span className="lucide">üëÜ</span>;
        const Info = () => <span className="lucide">‚ÑπÔ∏è</span>;

        const UserFriendlyCubicLanguageLearning = () => {
          const [rotation, setRotation] = useState({ x: -15, y: 25 });
          const [activeLevel, setActiveLevel] = useState('L0');
          const [activeFace, setActiveFace] = useState('front');
          const [isRotating, setIsRotating] = useState(true);
          const [highlightedGrid, setHighlightedGrid] = useState(null);
          const [showDetailedView, setShowDetailedView] = useState(true);
          const [showInstructions, setShowInstructions] = useState(true);

          useEffect(() => {
            if (isRotating) {
              const interval = setInterval(() => {
                setRotation(prev => ({ x: prev.x, y: (prev.y + 1) % 360 }));
              }, 100);
              return () => clearInterval(interval);
            }
          }, [isRotating]);

          const levels = {
            'L-2': { size: '9√ó9', description: 'Macro Learning Ecosystem', color: 'bg-purple-100', cubes: 81, cubeColor: '#e879f9' },
            'L-1': { size: '3√ó3', description: 'Strategic Coordination', color: 'bg-blue-100', cubes: 9, cubeColor: '#60a5fa' },
            'L0': { size: '1√ó1', description: 'Concrete Competence', color: 'bg-green-100', cubes: 1, cubeColor: '#34d399' },
            'L1': { size: '3√ó3', description: 'Micro-Behaviors', color: 'bg-yellow-100', cubes: 9, cubeColor: '#fbbf24' },
            'L2': { size: '9√ó9', description: 'Unconscious Integration', color: 'bg-red-100', cubes: 81, cubeColor: '#f87171' }
          };

          const waysOfKnowing = {
            front: { name: 'ËÆ∞ÂøÜ Memory', color: 'bg-red-200', cubeColor: '#fecaca', icon: 'üß†' },
            back: { name: 'ÊÉÖÊÑü Emotion', color: 'bg-pink-200', cubeColor: '#fbcfe8', icon: '‚ù§Ô∏è' },
            right: { name: 'ÊÑüÁü• Perception', color: 'bg-orange-200', cubeColor: '#fed7aa', icon: 'üëÅÔ∏è' },
            left: { name: 'ÁêÜÊÄß Reason', color: 'bg-blue-200', cubeColor: '#bfdbfe', icon: 'üßÆ' },
            top: { name: 'ÊÉ≥Ë±° Imagination', color: 'bg-purple-200', cubeColor: '#ddd6fe', icon: 'üé®' },
            bottom: { name: 'Áõ¥Ëßâ Intuition', color: 'bg-green-200', cubeColor: '#bbf7d0', icon: '‚ú®' }
          };

          const competences = [
            'Listening', 'Vocabulary', 'Grammar',
            'Speaking', 'Cultural Intelligence', 'Reading',
            'Writing', 'Affective', 'Social'
          ];

          const ecosystemDomains = [
            'Advanced Listening', 'Professional Speaking', 'Academic Reading',
            'Creative Writing', 'Cultural Intelligence', 'Digital Literacy',
            'Business Chinese', 'Educational Chinese', 'Heritage Language'
          ];

          const neuralPatterns = [
            'Phonological', 'Morphological', 'Syntactic',
            'Semantic', 'Cultural Intelligence', 'Pragmatic',
            'Discourse', 'Gestural', 'Emotional'
          ];

          const renderCubeGrid = (size, faceKey) => {
            const isCenter = (i) => i === Math.floor((size * size) / 2);
            
            if (size === 9) {
              return (
                <div className="grid grid-cols-3 gap-px h-full w-full p-1">
                  {Array.from({ length: 9 }, (_, gridIndex) => (
                    <div 
                      key={gridIndex}
                      className={`border rounded-sm transition-all ${gridIndex === 4 ? 'border-yellow-400 bg-yellow-200' : 'border-gray-400 bg-white'} ${
                        highlightedGrid === gridIndex ? 'ring-2 ring-blue-500 shadow-lg' : ''
                      }`}
                      onMouseEnter={() => setHighlightedGrid(gridIndex)}
                      onMouseLeave={() => setHighlightedGrid(null)}
                    >
                      <div className="grid grid-cols-3 gap-px h-full p-px">
                        {Array.from({ length: 9 }, (_, cellIndex) => (
                          <div
                            key={cellIndex}
                            className={`rounded-sm flex items-center justify-center text-xs
                              ${cellIndex === 4 
                                ? (gridIndex === 4 ? 'bg-yellow-300' : 'bg-blue-200')
                                : 'bg-gray-100'
                              }`}
                          >
                            {cellIndex === 4 && (
                              <span className="text-[6px] font-bold text-center">
                                {gridIndex === 4 ? 'ÊñáÂåñ' : 'Êô∫ËÉΩ'}
                              </span>
                            )}
                          </div>
                        ))}
                      </div>
                    </div>
                  ))}
                </div>
              );
            } else if (size === 3) {
              return (
                <div className="grid grid-cols-3 gap-1 h-full w-full p-2">
                  {Array.from({ length: 9 }, (_, i) => (
                    <div
                      key={i}
                      className={`border rounded flex items-center justify-center text-xs font-bold
                        ${isCenter(i) ? 'bg-yellow-300 border-yellow-500' : 'bg-white border-gray-300'}
                      `}
                    >
                      {isCenter(i) ? 'ÊñáÂåñÊô∫ËÉΩ' : i + 1}
                    </div>
                  ))}
                </div>
              );
            } else {
              return (
                <div className="h-full w-full flex items-center justify-center p-4">
                  <div className="w-full h-full bg-yellow-300 border-4 border-yellow-500 rounded-lg flex items-center justify-center font-bold text-lg">
                    ÊñáÂåñÊô∫ËÉΩ
                  </div>
                </div>
              );
            }
          };

          const cubeStyle = {
            transform: `rotateX(${rotation.x}deg) rotateY(${rotation.y}deg)`,
            transformStyle: 'preserve-3d',
          };

          const faceStyle = (face) => ({
            position: 'absolute',
            width: '240px',
            height: '240px',
            border: '3px solid #374151',
            backgroundColor: waysOfKnowing[face].cubeColor,
            opacity: activeFace === face ? 1 : 0.8,
          });

          const getExampleContent = () => {
            const examples = {
              'L-2': {
                front: 'Complete ecosystem memory coordination: 8 learning domains (planets) storing and retrieving patterns around Cultural Intelligence (central sun)',
                back: 'Emotional ecosystem engagement: Each domain planet contributes emotional intelligence that resonates with Cultural Intelligence sun',
                right: 'Embodied ecosystem awareness: Sensing coordination between all 8 domain planets and Cultural Intelligence sun through physical experience',
                left: 'Analytical ecosystem coordination: Logical integration between Academic Reading, Professional Speaking, Business Chinese planets around Cultural Intelligence sun',
                top: 'Creative ecosystem coordination: Imaginative connections between Creative Writing, Digital Literacy planets through Cultural Intelligence sun',
                bottom: 'Holistic ecosystem navigation: Intuitive coordination of all 8 domain planets through Cultural Intelligence central sun'
              },
              'L-1': {
                front: 'Strategic memory coordination: Cultural Intelligence accessing stored patterns from 8 competence planets (listening, speaking, reading, etc.)',
                back: 'Strategic emotional coordination: Cultural Intelligence resonating emotionally with affective and social competence planets',
                right: 'Strategic embodied coordination: Cultural Intelligence coordinating through physical awareness with listening/speaking competence planets',
                left: 'Strategic analytical coordination: Cultural Intelligence reasoning logically with vocabulary/grammar competence planets',
                top: 'Strategic creative coordination: Cultural Intelligence expressing imaginatively with writing/reading competence planets',
                bottom: 'Strategic intuitive coordination: Cultural Intelligence integrating holistically across all 8 supporting competence planets'
              },
              'L0': {
                front: 'Concrete Cultural Intelligence: Single focused competence accessed through memory patterns and stored cultural knowledge',
                back: 'Concrete Cultural Intelligence: Single focused competence experienced through emotional resonance and cultural feeling',
                right: 'Concrete Cultural Intelligence: Single focused competence embodied through sensory awareness and cultural perception',
                left: 'Concrete Cultural Intelligence: Single focused competence analyzed through logical understanding and cultural reasoning',
                top: 'Concrete Cultural Intelligence: Single focused competence expressed through creative visualization and cultural imagination',
                bottom: 'Concrete Cultural Intelligence: Single focused competence integrated through intuitive knowing and cultural wisdom'
              },
              'L1': {
                front: 'Micro-behavioral memory: Cultural Intelligence coordinating detailed memory patterns across 8 supporting micro-competences',
                back: 'Micro-behavioral emotion: Cultural Intelligence coordinating emotional micro-responses across 8 supporting competences',
                right: 'Micro-behavioral perception: Cultural Intelligence coordinating sensory micro-awareness across 8 supporting competences',
                left: 'Micro-behavioral reason: Cultural Intelligence coordinating analytical micro-processes across 8 supporting competences',
                top: 'Micro-behavioral imagination: Cultural Intelligence coordinating creative micro-expressions across 8 supporting competences',
                bottom: 'Micro-behavioral intuition: Cultural Intelligence coordinating intuitive micro-integration across 8 supporting competences'
              },
              'L2': {
                front: 'Unconscious neural memory: 8 neural pattern planets automatically coordinating memory storage around Cultural Intelligence neural sun',
                back: 'Unconscious neural emotion: Automatic emotional-cultural integration across all 8 neural pattern planets through Cultural Intelligence',
                right: 'Unconscious neural perception: Automatic embodied cultural responsiveness across all neural pattern planets through Cultural Intelligence',
                left: 'Unconscious neural reason: Automatic cultural logic integration across all 8 neural pattern planets through Cultural Intelligence',
                top: 'Unconscious neural imagination: Automatic cultural expression across all 8 neural pattern planets through Cultural Intelligence',
                bottom: 'Unconscious neural intuition: Automatic cultural-linguistic fluency integrating all 8 neural pattern planets through Cultural Intelligence'
              }
            };

            return examples[activeLevel][activeFace];
          };

          const render9x9FractalGrid = (level, domains) => {
            const { color } = levels[level];
            
            return (
              <div className="relative">
                <div className={`${color} border-4 border-gray-600 p-2 rounded-lg shadow-lg`}>
                  <div className="grid grid-cols-3 gap-1">
                    {Array.from({ length: 9 }, (_, gridIndex) => (
                      <div
                        key={gridIndex}
                        className={`
                          border-2 rounded p-1 cursor-pointer transition-all interactive-hint
                          ${gridIndex === 4 
                            ? 'border-yellow-600 bg-yellow-200 shadow-lg' 
                            : 'border-gray-400 bg-white hover:bg-gray-50'
                          }
                          ${highlightedGrid === gridIndex ? 'ring-2 ring-blue-500' : ''}
                        `}
                        onMouseEnter={() => setHighlightedGrid(gridIndex)}
                        onMouseLeave={() => setHighlightedGrid(null)}
                      >
                        <div className="grid grid-cols-3 gap-px">
                          {Array.from({ length: 9 }, (_, cellIndex) => (
                            <div
                              key={cellIndex}
                              className={`
                                aspect-square border border-gray-300 rounded-sm flex items-center justify-center text-xs font-bold
                                ${cellIndex === 4 
                                  ? (gridIndex === 4 ? 'bg-yellow-400 border-yellow-700' : 'bg-blue-200 border-blue-500')
                                  : 'bg-gray-100'
                                }
                              `}
                            >
                              {cellIndex === 4 ? (
                                <span className="text-[6px] text-center leading-none">
                                  {domains?.[gridIndex]?.slice(0, 6) || 'ÊñáÂåñ'}
                                </span>
                              ) : (
                                <span className="text-[4px]">
                                  {competences?.[cellIndex]?.slice(0, 2) || ''}
                                </span>
                              )}
                            </div>
                          ))}
                        </div>
                        <div className="text-center text-[8px] font-bold mt-1 text-gray-700">
                          {gridIndex === 4 ? 'SUN' : `P${gridIndex + 1}`}
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
                <div className={`absolute top-3 left-3 w-full h-full ${color} border-4 border-gray-600 rounded-lg opacity-40 -z-10`}></div>
                <div className={`absolute -top-3 left-3 w-full h-6 ${color} border-4 border-gray-600 rounded-t-lg opacity-20 -z-20`}></div>
              </div>
            );
          };

          const render3x3Grid = () => {
            const { color } = levels[activeLevel];
            
            return (
              <div className="relative">
                <div className={`${color} border-4 border-gray-600 p-4 rounded-lg shadow-lg`}>
                  <div className="grid grid-cols-3 gap-2">
                    {Array.from({ length: 9 }, (_, i) => (
                      <div
                        key={i}
                        className={`
                          aspect-square border-2 border-gray-400 rounded flex items-center justify-center text-sm font-bold
                          ${i === 4 ? 'bg-yellow-300 border-yellow-600' : 'bg-white'}
                        `}
                      >
                        {competences?.[i]?.slice(0, 4)}
                      </div>
                    ))}
                  </div>
                </div>
                <div className={`absolute top-3 left-3 w-full h-full ${color} border-4 border-gray-600 rounded-lg opacity-40 -z-10`}></div>
              </div>
            );
          };

          const render1x1Grid = () => {
            const { color } = levels['L0'];
            
            return (
              <div className="relative">
                <div className={`${color} border-4 border-gray-600 p-8 rounded-lg shadow-lg`}>
                  <div className="aspect-square border-4 border-yellow-600 rounded-lg bg-yellow-300 flex items-center justify-center text-lg font-bold">
                    ÊñáÂåñÊô∫ËÉΩ
                  </div>
                </div>
                <div className={`absolute top-3 left-3 w-full h-full ${color} border-4 border-gray-600 rounded-lg opacity-40 -z-10`}></div>
              </div>
            );
          };

          const renderDetailedCube = (level) => {
            if (level === 'L-2') {
              return render9x9FractalGrid(level, ecosystemDomains);
            } else if (level === 'L2') {
              return render9x9FractalGrid(level, neuralPatterns);
            } else if (level === 'L-1' || level === 'L1') {
              return render3x3Grid();
            } else {
              return render1x1Grid();
            }
          };

          const renderFractalExplanation = () => {
            if (activeLevel === 'L-2' || activeLevel === 'L2') {
              return (
                <div className="mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200">
                  <h4 className="font-bold text-sm mb-2 flex items-center gap-2">
                    <Mouse /> Fractal Sun/Planet Structure:
                  </h4>
                  <div className="text-sm text-gray-700">
                    <p><strong>Central Sun (Yellow):</strong> {activeLevel === 'L-2' ? 'Cultural Intelligence learning domain' : 'Cultural Intelligence neural hub'}</p>
                    <p><strong>8 Surrounding Planets:</strong> {activeLevel === 'L-2' ? 'Other learning domains that coordinate with Cultural Intelligence' : 'Neural patterns that integrate with Cultural Intelligence'}</p>
                    <p><strong>Each Planet is a 3√ó3 Grid:</strong> Contains its own sun/planet structure at smaller scale</p>
                    <p className="mt-2 font-semibold text-blue-600">üí° Hover over different grids to explore the fractal relationships!</p>
                  </div>
                  {highlightedGrid !== null && (
                    <div className="mt-2 p-2 bg-white rounded border border-blue-300">
                      <strong>üîç Grid {highlightedGrid === 4 ? 'SUN' : `Planet ${highlightedGrid + 1}`}:</strong> {
                        highlightedGrid === 4 ? 'Central Cultural Intelligence coordination hub' : 
                        `${activeLevel === 'L-2' ? ecosystemDomains[highlightedGrid] : neuralPatterns[highlightedGrid]} coordination with Cultural Intelligence`
                      }
                    </div>
                  )}
                </div>
              );
            }
            return null;
          };

          return (
            <div className="max-w-7xl mx-auto p-6 bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen">
              
              {/* Interactive Instructions Panel */}
              {showInstructions && (
                <div className="bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl p-6 mb-8 shadow-xl">
                  <div className="flex justify-between items-start mb-4">
                    <h2 className="text-2xl font-bold flex items-center gap-2">
                      <Info /> How to Use This Interactive Visualization
                    </h2>
                    <button 
                      onClick={() => setShowInstructions(false)}
                      className="text-white hover:text-gray-200 text-xl"
                    >
                      ‚úï
                    </button>
                  </div>
                  
                  <div className="grid md:grid-cols-3 gap-6 text-sm">
                    <div className="bg-white/10 rounded-lg p-4">
                      <h3 className="font-bold mb-2 flex items-center gap-2">
                        <Hand /> 1. Interact with the Cube
                      </h3>
                      <ul className="space-y-1">
                        <li>‚Ä¢ Click on the colored buttons below the cube to select different "Ways of Knowing"</li>
                        <li>‚Ä¢ Watch the cube face highlight in blue when selected</li>
                        <li>‚Ä¢ See detailed explanations update in real-time</li>
                      </ul>
                    </div>
                    
                    <div className="bg-white/10 rounded-lg p-4">
                      <h3 className="font-bold mb-2 flex items-center gap-2">
                        <Mouse /> 2. Explore Fractal Levels
                      </h3>
                      <ul className="space-y-1">
                        <li>‚Ä¢ Click the level buttons (L-2, L-1, L0, L1, L2) to change the architecture</li>
                        <li>‚Ä¢ Notice how the "Detailed Fractal Architecture" section updates</li>
                        <li>‚Ä¢ Hover over grids to see fractal relationships</li>
                      </ul>
                    </div>
                    
                    <div className="bg-white/10 rounded-lg p-4">
                      <h3 className="font-bold mb-2 flex items-center gap-2">
                        <Eye /> 3. Control the View
                      </h3>
                      <ul className="space-y-1">
                        <li>‚Ä¢ Use "Stop/Start Rotation" to control cube movement</li>
                        <li>‚Ä¢ Toggle "Show/Hide Details" for the detailed architecture view</li>
                        <li>‚Ä¢ Scroll down to see the complete fractal progression</li>
                      </ul>
                    </div>
                  </div>
                </div>
              )}

              {/* Header */}
              <div className="text-center mb-8">
                <h1 className="text-4xl font-bold mb-4 text-gray-800">
                  3D Fractal Language Learning System
                </h1>
                <p className="text-xl text-gray-600 mb-6">
                  Interactive Visualization: Cultural Intelligence Through Six Ways of Knowing
                </p>
                
                {/* Global Controls */}
                <div className="flex flex-wrap justify-center gap-4 mb-6">
                  <button
                    onClick={() => setIsRotating(!isRotating)}
                    className="flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
                  >
                    <RotateCcw />
                    {isRotating ? 'Stop Rotation' : 'Start Rotation'}
                  </button>
                  
                  <button
                    onClick={() => setShowDetailedView(!showDetailedView)}
                    className="flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"
                  >
                    <Eye />
                    {showDetailedView ? 'Hide Details' : 'Show Details'}
                  </button>

                  <button
                    onClick={() => setShowInstructions(true)}
                    className="flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors"
                  >
                    <Info />
                    Show Instructions
                  </button>
                </div>
              </div>

              {/* 3D Rotating Cube Section */}
              <div className="bg-white rounded-xl shadow-xl p-8 mb-8">
                <h2 className="text-2xl font-bold text-center mb-6 text-gray-800">
                  üéØ Step 1: Explore the 3D Cube - Cultural Intelligence Through Six Ways of Knowing
                </h2>
                
                <div className="flex flex-col xl:flex-row gap-8">
                  
                  {/* 3D Cube */}
                  <div className="flex-1 flex justify-center items-center" style={{ perspective: '1000px' }}>
                    <div className="relative w-60 h-60" style={cubeStyle}>
                      
                      {/* All Six Faces */}
                      {Object.entries(waysOfKnowing).map(([faceKey, face]) => {
                        const transforms = {
                          front: 'translateZ(120px)',
                          back: 'translateZ(-120px) rotateY(180deg)',
                          right: 'rotateY(90deg) translateZ(120px)',
                          left: 'rotateY(-90deg) translateZ(120px)',
                          top: 'rotateX(90deg) translateZ(120px)',
                          bottom: 'rotateX(-90deg) translateZ(120px)'
                        };

                        return (
                          <div 
                            key={faceKey}
                            style={{
                              ...faceStyle(faceKey),
                              transform: transforms[faceKey],
                            }}
                            className={`cursor-pointer transition-all ${
                              activeFace === faceKey ? 'cube-face-highlight' : ''
                            }`}
                            onClick={() => setActiveFace(faceKey)}
                          >
                            <div className="absolute top-2 left-2 text-sm font-bold flex items-center gap-1 z-10">
                              {face.icon} {face.name}
                            </div>
                            {renderCubeGrid(levels[activeLevel].cubes === 81 ? 9 : levels[activeLevel].cubes === 9 ? 3 : 1, faceKey)}
                          </div>
                        );
                      })}

                      {/* Central Core Indicator */}
                      <div className="absolute top-1/2 left-1/2 w-3 h-3 bg-yellow-400 rounded-full border-2 border-yellow-600 transform -translate-x-1/2 -translate-y-1/2 z-20 shadow-lg">
                      </div>
                    </div>
                  </div>

                  {/* Cube Info Panel */}
                  <div className="flex-1 space-y-4">
                    
                    {/* Current Level Info */}
                    <div className="bg-gray-50 rounded-lg p-4 border">
                      <h3 className="text-lg font-bold mb-3" style={{ color: levels[activeLevel].cubeColor }}>
                        Currently Viewing: {activeLevel} - {levels[activeLevel].description}
                      </h3>
                      <div className="space-y-2 text-sm">
                        <div><strong>Grid Size:</strong> {levels[activeLevel].size}</div>
                        <div><strong>Structure:</strong> 
                          {levels[activeLevel].cubes === 81 ? ' 8 planet grids + 1 central sun grid' :
                           levels[activeLevel].cubes === 9 ? ' 8 supporting competences + Cultural Intelligence center' :
                           ' Single Cultural Intelligence focus'}
                        </div>
                        <div><strong>Purpose:</strong>
                          {activeLevel === 'L-2' && ' Conscious ecosystem coordination'}
                          {activeLevel === 'L-1' && ' Strategic competence coordination'}
                          {activeLevel === 'L0' && ' Concrete competence application'}
                          {activeLevel === 'L1' && ' Micro-behavioral precision'}
                          {activeLevel === 'L2' && ' Unconscious automatic integration'}
                        </div>
                      </div>
                    </div>

                    {/* Active Face Description */}
                    <div className="bg-blue-50 rounded-lg p-4 border border-blue-200">
                      <h3 className="text-lg font-bold mb-3 flex items-center gap-2">
                        {waysOfKnowing[activeFace].icon} {waysOfKnowing[activeFace].name} at {activeLevel}
                      </h3>
                      <p className="text-gray-700 text-sm">
                        {getExampleContent()}
                      </p>
                    </div>

                    {/* Ways of Knowing Selection */}
                    <div className="bg-gray-50 rounded-lg p-4 border">
                      <h4 className="font-bold mb-3 flex items-center gap-2">
                        <Hand /> Click to Select Different Ways of Knowing:
                      </h4>
                      <div className="grid grid-cols-2 gap-2">
                        {Object.entries(waysOfKnowing).map(([key, way]) => (
                          <button
                            key={key}
                            onClick={() => setActiveFace(key)}
                            className={`p-2 rounded border-2 transition-all text-left text-xs interactive-hint ${
                              activeFace === key ? 'border-blue-600 shadow-md scale-105 ring-2 ring-blue-200' : 'border-gray-300 hover:border-gray-400 hover:shadow-sm'
                            }`}
                            style={{ backgroundColor: way.cubeColor }}
                          >
                            <div className="text-sm">{way.icon}</div>
                            <div className="font-bold text-xs">{way.name}</div>
                          </button>
                        ))}
                      </div>
                      <p className="text-xs text-gray-600 mt-2">üí° Notice how the cube face highlights when you click!</p>
                    </div>
                  </div>
                </div>
              </div>

              {/* Fractal Progression Overview with Clear Call to Action */}
              <div className="bg-gradient-to-r from-purple-100 to-blue-100 rounded-xl shadow-xl p-8 mb-8">
                <h2 className="text-2xl font-bold text-center mb-4 text-gray-800">
                  üéØ Step 2: Explore Complete Fractal Progression
                </h2>
                <div className="text-center mb-6">
                  <div className="bg-yellow-100 border border-yellow-400 rounded-lg p-4 inline-block">
                    <p className="text-lg font-semibold text-yellow-800 flex items-center gap-2">
                      <Hand /> Click any level below to see its detailed architecture!
                    </p>
                    <p className="text-sm text-yellow-700 mt-1">
                      The "Detailed Fractal Architecture" section will update automatically
                    </p>
                  </div>
                </div>
                
                <div className="flex flex-wrap justify-center items-center gap-4 text-lg font-bold mb-6">
                  {Object.entries(levels).map(([level, info], index) => (
                    <React.Fragment key={level}>
                      <button
                        onClick={() => setActiveLevel(level)}
                        className={`px-6 py-4 rounded-lg border-2 transition-all interactive-hint ${
                          activeLevel === level 
                            ? 'border-gray-600 shadow-lg scale-105 ' + info.color + ' ring-4 ring-blue-200'
                            : 'border-gray-300 bg-white hover:shadow-md hover:scale-102'
                        }`}
                      >
                        <div className="text-xl">{level}</div>
                        <div className="text-sm">{info.size}</div>
                        <div className="text-xs">{info.description}</div>
                        {activeLevel === level && (
                          <div className="text-xs text-blue-600 mt-1 font-bold">
                            ‚Üê Currently Active
                          </div>
                        )}
                      </button>
                      {index < Object.keys(levels).length - 1 && (
                        <ChevronDown />
                      )}
                    </React.Fragment>
                  ))}
                </div>

                <div className="text-center space-y-2">
                  <p className="text-lg font-semibold">Perfect Mathematical Symmetry</p>
                  <p className="text-gray-700">L-2 and L2 both use 9√ó9 architecture with identical fractal structure</p>
                  <p className="text-gray-600 text-sm">L-2: Conscious ecosystem coordination | L2: Unconscious fluency integration</p>
                  <p className="text-gray-600 text-sm">Each level maintains sun/planet relationship through six ways of knowing</p>
                </div>
              </div>

              {/* Detailed Architecture View with Clear Indication */}
              {showDetailedView && (
                <div className="bg-white rounded-xl shadow-xl p-8 mb-8 border-4 border-blue-200">
                  <div className="flex items-center justify-center mb-6">
                    <div className="bg-blue-100 border border-blue-300 rounded-lg p-4">
                      <h2 className="text-2xl font-bold text-center text-blue-800 flex items-center gap-2">
                        üîç Step 3: Detailed Fractal Architecture - {activeLevel} Level
                      </h2>
                      <p className="text-center text-blue-600 text-sm mt-2">
                        This section updates when you click different levels above! ‚Üë
                      </p>
                    </div>
                  </div>
                  
                  <div className="flex flex-col lg:flex-row gap-8">
                    
                    {/* Detailed Grid Visualization */}
                    <div className="flex-1">
                      <h3 className="text-xl font-bold mb-4 text-center">
                        {activeLevel}: {levels[activeLevel].description} ({levels[activeLevel].size})
                      </h3>
                      <div className="flex justify-center">
                        {renderDetailedCube(activeLevel)}
                      </div>
                      {renderFractalExplanation()}
                    </div>

                    {/* Architecture Details */}
                    <div className="flex-1 space-y-4">
                      <div className="bg-gray-50 rounded-lg p-4 border">
                        <h4 className="text-lg font-bold mb-3">Architecture Details:</h4>
                        <div className="space-y-2 text-sm">
                          <div><strong>Grid Structure:</strong> {levels[activeLevel].size}</div>
                          <div><strong>Fractal Pattern:</strong>
                            {(activeLevel === 'L-2' || activeLevel === 'L2') ? ' 9 grids (1 sun + 8 planets), each containing 3√ó3 internal structure' : 
                             (activeLevel === 'L-1' || activeLevel === 'L1') ? ' 1 grid with 3√ó3 structure (1 sun + 8 planets)' : 
                             ' 1 single competence focus'}
                          </div>
                          <div><strong>Total Elements:</strong> {levels[activeLevel].cubes} √ó 6 faces = {levels[activeLevel].cubes * 6} total learning elements</div>
                          <div><strong>Coordination Focus:</strong> Cultural Intelligence as central organizing principle</div>
                        </div>
                      </div>

                      <div className="bg-gray-50 rounded-lg p-4 border">
                        <h4 className="text-lg font-bold mb-3">Assessment Integration:</h4>
                        <div className="space-y-2 text-sm">
                          <div><strong>Universal Observables:</strong> Measured across all 6 ways of knowing</div>
                          <div><strong>Context Rubrics:</strong> Adapted for specific cultural-linguistic contexts</div>
                          <div><strong>Coordination Evidence:</strong> Multi-competence integration patterns</div>
                          <div><strong>HSK Alignment:</strong> Progression toward advanced competence levels</div>
                        </div>
                      </div>

                      <div className="bg-yellow-50 rounded-lg p-4 border border-yellow-300">
                        <h4 className="text-lg font-bold mb-3 text-yellow-800">üîÑ Try This:</h4>
                        <div className="space-y-2 text-sm text-yellow-700">
                          <div>1. Click different levels above to see how this architecture changes</div>
                          <div>2. Notice the fractal sun/planet relationships at each scale</div>
                          <div>3. Hover over grids (L-2 and L2) to explore fractal details</div>
                          <div>4. Compare the symmetry between L-2 and L2 levels</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {/* Sharing and Usage Information */}
              <div className="bg-yellow-50 border-l-4 border-yellow-400 rounded-r-xl p-6">
                <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
                  <Share2 />
                  Enhanced 3D Fractal Language Learning System
                </h3>
                
                <div className="grid md:grid-cols-2 gap-6">
                  <div>
                    <h4 className="font-bold mb-2">Interactive Features You Just Explored:</h4>
                    <ul className="text-sm space-y-1 text-gray-700">
                      <li>‚Ä¢ 3D rotating cube with six clickable ways of knowing</li>
                      <li>‚Ä¢ Visual feedback when selecting cube faces</li>
                      <li>‚Ä¢ Dynamic level navigation (L-2 through L2)</li>
                      <li>‚Ä¢ Fractal grid visualization with hover effects</li>
                      <li>‚Ä¢ Real-time content updates</li>
                      <li>‚Ä¢ Cultural Intelligence coordination tracking</li>
                    </ul>
                  </div>
                  
                  <div>
                    <h4 className="font-bold mb-2">Educational Applications:</h4>
                    <ul className="text-sm space-y-1 text-gray-700">
                      <li>‚Ä¢ Advanced Chinese language learning (HSK 7-9)</li>
                      <li>‚Ä¢ Teacher training and curriculum design</li>
                      <li>‚Ä¢ Assessment framework demonstration</li>
                      <li>‚Ä¢ Research in holistic language acquisition</li>
                      <li>‚Ä¢ AI-assisted learning systems</li>
                    </ul>
                  </div>
                </div>

                <div className="mt-4 p-4 bg-white rounded-lg border">
                  <p className="text-sm text-gray-700">
                    <strong>Mathematical Foundation:</strong> This interactive visualization demonstrates how Cultural Intelligence coordinates 
                    through six ways of knowing (memory, emotion, perception, reason, imagination, intuition) across five levels 
                    of abstraction, maintaining fractal sun/planet relationships at every scale for comprehensive language mastery.
                  </p>
                </div>
              </div>
            </div>
          );
        };

        // Render the component
        ReactDOM.render(<UserFriendlyCubicLanguageLearning />, document.getElementById('root'));
    </script>
</body>
</html>
